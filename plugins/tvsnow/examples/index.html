<!doctype html><title>Minimal tQuery Page</title>
<script src="../../../build/tquery-bundle.js"></script>
<script src="../../requirejs/tquery.norequirejs.js"></script>


<script src="../../videos/tquery.createVideoTexture.js"></script>
<script src="../../videos/tquery.createWebcamTexture.js"></script>

<body><script>
	var world	= tQuery.createWorld().start();

	var createSnowCanvas	= function(width, height){
		var canvas	= document.createElement('canvas');
		var context	= canvas.getContext('2d');
		canvas.width	= width;
		canvas.height	= height;
		
		var imageData	= context.createImageData(canvas.width, canvas.height);
		var pix		= imageData.data;
		// Loop over each pixel and set a transparent red.
		for(var i = 0; i < pix.length; i += 4){
			var intensity	= Math.floor(Math.random() * 256);
			pix[i  ] = intensity;
			pix[i+1] = intensity;
			pix[i+2] = intensity;
			pix[i+3] = 255;
		}
		context.putImageData(imageData, 0,0);
		return canvas;
	}

	var canvases	= [];
	for( var i = 0; i < 10; i++ ){
		var canvas	= createSnowCanvas(256,256);
		canvases.push(canvas)
	}


	var canvas	= document.createElement('canvas');
	var context	= canvas.getContext('2d');
	canvas.width	= 256;
	canvas.height	= 256;
	document.body.appendChild(canvas);
	

	//var texture	= tQuery.createWebcamTexture();
	var texture	= new THREE.Texture(canvas)

	var canvasIdx	= 0;
	world.loop().hook(function(){
		context.drawImage(canvases[canvasIdx], 0, 0);
		canvasIdx	= (canvasIdx+1) %  canvases.length;
		texture.needsUpdate	= true;
	})

	var material	= new THREE.MeshBasicMaterial({
		map	: texture
	});
	tQuery.createCube(material).addTo(world).rotateY(-Math.PI/2);

	
	
</script></body>